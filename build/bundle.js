var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function f(){return l(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}let b;function h(t){b=t}const w=[],_=[],$=[],A=[],x=Promise.resolve();let v=!1;function k(t){$.push(t)}let E=!1;const O=new Set;function U(){if(!E){E=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];h(e),j(e.$$)}for(h(null),w.length=0;_.length;)_.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];O.has(e)||(O.add(e),e())}$.length=0}while(w.length);for(;A.length;)A.pop()();v=!1,E=!1,O.clear()}}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const C=new Set;function S(t,e){t&&t.i&&(C.delete(t),t.i(e))}function P(t,n,i,a){const{fragment:c,on_mount:s,on_destroy:u,after_update:l}=t.$$;c&&c.m(n,i),a||k((()=>{const n=s.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(k)}function F(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(w.push(t),v||(v=!0,x.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(e,o,i,a,c,u,l=[-1]){const f=b;h(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:o.context||[]),callbacks:n(),dirty:l,skip_bound:!1};let p=!1;if(d.ctx=i?i(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),p&&I(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(s)}else d.fragment&&d.fragment.c();o.intro&&S(e.$$.fragment),P(e,o.target,o.anchor,o.customElement),U()}h(f)}class T{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const D="undefined"!=typeof BigUint64Array,W=Symbol(),B=new TextDecoder("utf-16le");function L(t,e){const n=new Uint32Array(t)[e+-4>>>2]>>>1,r=new Uint16Array(t,e,n);return n<=32?String.fromCharCode.apply(String,r):B.decode(r)}function V(t){const e={};function n(t,e){return t?L(t.buffer,e):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,o,i,a){const c=e.memory||r.memory;throw Error(`abort: ${n(c,t)} at ${n(c,o)}:${i}:${a}`)},r.trace=r.trace||function(t,o,...i){const a=e.memory||r.memory;console.log(`trace: ${n(a,t)}${o?" ":""}${i.slice(0,o).join(", ")}`)},r.seed=r.seed||Date.now,t.Math=t.Math||Math,t.Date=t.Date||Date,e}const z=function(){throw Error("Operation requires compiling with --exportRuntime")};function G(t,e){const n=e.exports,r=n.memory,o=n.table,i=n.__new||z,a=n.__pin||z,c=n.__unpin||z,s=n.__collect||z,u=n.__rtti_base,l=u?function(t){return t[u>>>2]}:z;function f(t){const e=function(t){const e=new Uint32Array(r.buffer);if((t>>>=0)>=l(e))throw Error(`invalid id: ${t}`);return e[(u+4>>>2)+2*t]}(t);if(!(7&e))throw Error(`not an array: ${t}, flags=${e}`);return e}function d(t){const e=new Uint32Array(r.buffer);if((t>>>=0)>=l(e))throw Error(`invalid id: ${t}`);return e[(u+4>>>2)+2*t+1]}function p(t){return 31-Math.clz32(t>>>6&31)}function g(t,e,n){const o=r.buffer;if(n)switch(t){case 2:return new Float32Array(o);case 3:return new Float64Array(o)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(o);case 1:return new(e?Int16Array:Uint16Array)(o);case 2:return new(e?Int32Array:Uint32Array)(o);case 3:return new(e?BigInt64Array:BigUint64Array)(o)}throw Error(`unsupported align: ${t}`)}function y(t){const e=new Uint32Array(r.buffer),n=f(e[t+-8>>>2]),o=p(n);let i=4&n?t:e[t+4>>>2];const a=2&n?e[t+12>>>2]:e[i+-4>>>2]>>>o;return g(o,2048&n,4096&n).subarray(i>>>=o,i+a)}function m(t,e,n){return new t(b(t,e,n))}function b(t,e,n){const o=r.buffer,i=new Uint32Array(o),a=i[n+4>>>2];return new t(o,a,i[a+-4>>>2]>>>e)}function h(e,n,r){t[`__get${n}`]=m.bind(null,e,r),t[`__get${n}View`]=b.bind(null,e,r)}return t.__new=i,t.__pin=a,t.__unpin=c,t.__collect=s,t.__newString=function(t){if(null==t)return 0;const e=t.length,n=i(e<<1,1),o=new Uint16Array(r.buffer);for(var a=0,c=n>>>1;a<e;++a)o[c+a]=t.charCodeAt(a);return n},t.__getString=function(t){if(!t)return null;const e=r.buffer;if(1!==new Uint32Array(e)[t+-8>>>2])throw Error(`not a string: ${t}`);return L(e,t)},t.__newArray=function(t,e){const n=f(t),o=p(n),s=e.length,u=i(s<<o,4&n?t:0);let l;if(4&n)l=u;else{a(u);const e=i(2&n?16:12,t);c(u);const f=new Uint32Array(r.buffer);f[e+0>>>2]=u,f[e+4>>>2]=u,f[e+8>>>2]=s<<o,2&n&&(f[e+12>>>2]=s),l=e}const d=g(o,2048&n,4096&n);if(16384&n)for(let t=0;t<s;++t){const n=e[t];d[(u>>>o)+t]=n}else d.set(e,u>>>o);return l},t.__getArrayView=y,t.__getArray=function(t){const e=y(t),n=e.length,r=new Array(n);for(let t=0;t<n;t++)r[t]=e[t];return r},t.__getArrayBuffer=function(t){const e=r.buffer,n=new Uint32Array(e)[t+-4>>>2];return e.slice(t,t+n)},[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((t=>{h(t,t.name,31-Math.clz32(t.BYTES_PER_ELEMENT))})),D&&[BigUint64Array,BigInt64Array].forEach((t=>{h(t,t.name.slice(3),3)})),t.__instanceof=function(t,e){const n=new Uint32Array(r.buffer);let o=n[t+-8>>>2];if(o<=l(n))do{if(o==e)return!0;o=d(o)}while(o);return!1},t.memory=t.memory||r,t.table=t.table||o,H(n,t)}function N(t){return"undefined"!=typeof Response&&t instanceof Response}function R(t){return t instanceof WebAssembly.Module}async function q(t,e={}){if(N(t=await t))return J(t,e);const n=R(t)?t:await WebAssembly.compile(t),r=V(e),o=await WebAssembly.instantiate(n,e);return{module:n,instance:o,exports:G(r,o)}}async function J(t,e={}){if(!WebAssembly.instantiateStreaming)return q(N(t=await t)?t.arrayBuffer():t,e);const n=V(e),r=await WebAssembly.instantiateStreaming(t,e),o=G(n,r.instance);return{...r,exports:o}}function H(t,e={}){const n=t.__argumentsLength?e=>{t.__argumentsLength.value=e}:t.__setArgumentsLength||t.__setargc||(()=>{});for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const o=t[r];let i=r.split("."),a=e;for(;i.length>1;){let t=i.shift();Object.prototype.hasOwnProperty.call(a,t)||(a[t]={}),a=a[t]}let c=i[0],s=c.indexOf("#");if(s>=0){const e=c.substring(0,s),i=a[e];if(void 0===i||!i.prototype){const t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf(){return this[W]}},t.wrap=function(e){return Object.create(t.prototype,{[W]:{value:e,writable:!1}})},i&&Object.getOwnPropertyNames(i).forEach((e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e)))),a[e]=t}if(c=c.substring(s+1),a=a[e].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let e=t[r.replace("set:","get:")],n=t[r.replace("get:","set:")];Object.defineProperty(a,c,{get(){return e(this[W])},set(t){n(this[W],t)},enumerable:!0})}}else"constructor"===c?(a[c]=(...t)=>(n(t.length),o(...t))).original=o:(a[c]=function(...t){return n(t.length),o(this[W],...t)}).original=o}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:t[r.replace("set:","get:")],set:t[r.replace("get:","set:")],enumerable:!0}):"function"==typeof o&&o!==n?(a[c]=(...t)=>(n(t.length),o(...t))).original=o:a[c]=o}return e}let Y,K;const Q={env:{abort:function(){console.log("abort")}}};({instantiate:q,instantiateSync:function(t,e={}){const n=R(t)?t:new WebAssembly.Module(t),r=V(e),o=new WebAssembly.Instance(n,e);return{module:n,instance:o,exports:G(r,o)}},instantiateStreaming:J,demangle:H}).instantiateStreaming(fetch("/assemblyscript/optimized.wasm"),Q).then((({exports:t})=>{Y=t.primeFactorization,K=t.__getArray,console.log("exports",t)}));const X=0,Z=1,tt=2,et=0,nt=1,rt=2;let ot;function it(e){let n;return{c(){n=u("p"),n.textContent="Press button to start calc"},m(t,e){c(t,n,e)},p:t,d(t){t&&s(n)}}}function at(e){let n;return{c(){n=u("p"),n.textContent="Calculating..."},m(t,e){c(t,n,e)},p:t,d(t){t&&s(n)}}}function ct(t){let e,n,r,o,i,d,g,m,b,h,w,_=t[2].join(", ")+"";return{c(){e=u("p"),n=l("Result for "),r=l(t[3]),o=l(" is: "),i=l(_),d=l("."),g=f(),m=u("p"),b=l("Calculation took "),h=l(t[4]),w=l(" seconds."),p(e,"class","font-semibold ")},m(t,s){c(t,e,s),a(e,n),a(e,r),a(e,o),a(e,i),a(e,d),c(t,g,s),c(t,m,s),a(m,b),a(m,h),a(m,w)},p(t,e){8&e&&y(r,t[3]),4&e&&_!==(_=t[2].join(", ")+"")&&y(i,_),16&e&&y(h,t[4])},d(t){t&&s(e),t&&s(g),t&&s(m)}}}function st(e){let n,o,i,y,b,h,w,_,$,A,x,v,k,E,O,U,j;function C(t,e){return t[0]===rt?ct:t[0]===nt?at:t[0]===et?it:void 0}let S=C(e),P=S&&S(e);return{c(){n=u("input"),o=f(),i=u("button"),y=l("Calc"),h=f(),w=u("div"),_=l("Test values:\n    "),$=u("button"),$.textContent="37778193",A=f(),x=u("span"),x.textContent=",",v=f(),k=u("button"),k.textContent="522781941",E=f(),O=u("div"),P&&P.c(),p(n,"type","number"),p(n,"class","bg-gray-100 rounded p-2 mr-3 focus:ring focus:ring-indigo-400 focus:outline-none"),i.disabled=b=e[0]===nt,p(i,"type","button"),p(i,"class","bg-indigo-500 rounded px-3 py-2 text-gray-100 hover:bg-indigo-300 focus:outline-none focus:ring focus:ring-indigo-200 disabled:bg-gray-400 disabled:cursor-not-allowed"),p($,"class","underline text-blueGray-700"),p(k,"class","underline text-blueGray-700"),p(O,"class","mt-4 text-lg")},m(t,r){c(t,n,r),m(n,e[1]),c(t,o,r),c(t,i,r),a(i,y),c(t,h,r),c(t,w,r),a(w,_),a(w,$),a(w,A),a(w,x),a(w,v),a(w,k),c(t,E,r),c(t,O,r),P&&P.m(O,null),U||(j=[d(n,"input",e[8]),d(i,"click",e[5]),d($,"click",e[6]),d(k,"click",e[6])],U=!0)},p(t,[e]){2&e&&g(n.value)!==t[1]&&m(n,t[1]),1&e&&b!==(b=t[0]===nt)&&(i.disabled=b),S===(S=C(t))&&P?P.p(t,e):(P&&P.d(1),P=S&&S(t),P&&(P.c(),P.m(O,null)))},i:t,o:t,d(t){t&&s(n),t&&s(o),t&&s(i),t&&s(h),t&&s(w),t&&s(E),t&&s(O),P&&P.d(),U=!1,r(j)}}}function ut(t,e,n){let{radioValue:r}=e;const o=new Worker("/primeFactorizationWorker.js");let i,a=et,c=100,s=null,u=null,l=null;return o.addEventListener("message",(t=>{let e=(new Date).getTime();n(0,a=rt),n(2,s=t.data),n(4,l=((e-i)/1e3).toFixed(4))}),!1),t.$$set=t=>{"radioValue"in t&&n(7,r=t.radioValue)},[a,c,s,u,l,async()=>{switch(n(0,a=nt),n(2,s=null),n(3,u=c),i=(new Date).getTime(),r){case X:console.log("Calc with JS"),o.postMessage(c);break;case Z:console.log("Calc with AssemblyScript");const e=(t=>{const e=Y(t);return console.log(e),K(e)})(c);let u=(new Date).getTime();n(0,a=rt),n(4,l=((u-i)/1e3).toFixed(4)),n(2,s=e.filter((t=>0!==t)));break;case tt:console.log("Calc with Go");const f=await(t=c,window.primeFactorization(t));let d=(new Date).getTime();n(0,a=rt),n(4,l=((d-i)/1e3).toFixed(4)),n(2,s=f.filter((t=>0!==t)));break;default:console.error("Unhandeled case for",r),n(0,a=rt)}var t},t=>{const e=parseInt(t.target.innerHTML);n(1,c=e)},r,function(){c=g(this.value),n(1,c)}]}(async()=>{const t=new Go;ot=await WebAssembly.instantiateStreaming(fetch("go/go-prime.wasm"),t.importObject),t.run(ot.instance)})();class lt extends T{constructor(t){super(),M(this,t,ut,st,i,{radioValue:7})}}function ft(t){let e,n,o,i,g,y,m,b,h,w,_,$,A,x,v,k,E,O,U,j,I,M,T;return j=new lt({props:{radioValue:t[0]}}),{c(){var r;e=u("main"),n=u("h1"),n.textContent="Prime Factorization",o=f(),i=u("div"),g=u("label"),y=u("input"),b=l("\n      JavaScript"),h=f(),w=u("label"),_=u("input"),A=l("\n      AssemblyScript"),x=f(),v=u("label"),k=u("input"),O=l("\n      Go"),U=f(),(r=j.$$.fragment)&&r.c(),p(n,"class","text-4xl text-indigo-500 mb-4"),p(y,"type","radio"),y.checked=m=t[0]===X,p(y,"id","js"),p(y,"name","drone"),y.value=X,p(g,"for","js"),p(_,"type","radio"),_.checked=$=t[0]===Z,p(_,"id","as"),p(_,"name","drone"),_.value=Z,p(w,"for","as"),p(k,"type","radio"),k.checked=E=t[0]===tt,p(k,"id","go"),p(k,"name","drone"),k.value=tt,p(v,"for","go"),p(i,"class","my-6"),p(e,"class","mx-16 mt-6")},m(r,s){c(r,e,s),a(e,n),a(e,o),a(e,i),a(i,g),a(g,y),a(g,b),a(i,h),a(i,w),a(w,_),a(w,A),a(i,x),a(i,v),a(v,k),a(v,O),a(e,U),P(j,e,null),I=!0,M||(T=[d(y,"change",t[1]),d(_,"change",t[1]),d(k,"change",t[1])],M=!0)},p(t,[e]){(!I||1&e&&m!==(m=t[0]===X))&&(y.checked=m),(!I||1&e&&$!==($=t[0]===Z))&&(_.checked=$),(!I||1&e&&E!==(E=t[0]===tt))&&(k.checked=E);const n={};1&e&&(n.radioValue=t[0]),j.$set(n)},i(t){I||(S(j.$$.fragment,t),I=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(C.has(t))return;C.add(t),(void 0).c.push((()=>{C.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}(j.$$.fragment,t),I=!1},d(t){t&&s(e),F(j),M=!1,r(T)}}}function dt(t,e,n){let r=X;return[r,t=>{n(0,r=parseInt(t.target.value)),console.log(r)}]}return new class extends T{constructor(t){super(),M(this,t,dt,ft,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
